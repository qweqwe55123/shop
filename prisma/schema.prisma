generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Order {
  id              String     @id @default(cuid())
  orderNo         String     @unique

  customerName    String?
  customerPhone   String?
  customerEmail   String?
  note            String?
  pickupStore     String?

  subTotal        Int
  shipping        Int
  total           Int

  // ✅ 新增（只留一份，勿重複）
  status          String     @default("PENDING") // PENDING/PAID/FAILED/REFUND
  shipMethod      String     @default("POST")    // POST(郵局宅配) / CVS_NEWEBPAY(藍新超商)
  customerAddress String?                        // 宅配地址（POST 時用）

  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt          // ✅ 新增

  items           OrderItem[]
}

model OrderItem {
  id        String  @id @default(cuid())
  order     Order   @relation(fields: [orderId], references: [id], onDelete: Cascade)
  orderId   String
  productId String
  name      String
  price     Int
  qty       Int
  image     String?

  @@index([orderId])

}

